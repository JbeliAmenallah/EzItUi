<div class="surface-section border-round px-4 py-5 md:px-6 lg:px-8 mb-4">
  <ul class="list-none p-0 m-0 flex items-center font-medium">
    <li>
      <a class="text-500 no-underline cursor-pointer" [routerLink]="['/']" style="font-size: 1.3em;">
        <i class="fa-solid fa-house" style="font-size: 1.3em; padding-right: 3px;"></i>
        Application
      </a>
    </li>
    <li class="px-2" style="font-size: 1.5em;">
      <i class="pi pi-angle-right text-500 line-height-3" style="font-size: 1.1em;"></i>
    </li>
    <li>
      <a [routerLink]="['/employee/details']"><span class="text-blue-400" style="font-size: 1.3em;">Mes Absences</span></a>
    </li>
  </ul>
  <div class="flex align-items-start flex-column lg:justify-content-between lg:flex-row">
  <div class="greeting mt-4">
    <span class="text-500 font-normal">{{ greeting }}</span>
    <span class="text-red-600 font-bold text-xl px-2">{{ username }}</span>
    <span class="text-500 font-normal"> j'espère que vous êtes bien, Cette page présente des analyses de vos absences.</span>
  </div>
  <div class="mt-3 lg:mt-0">
    <!-- <a [routerLink]="['/conges/demande']">
      <button pButton pRipple label="Demande Conge" class="p-button-outlined mr-2 hover-scale" icon="pi pi-user-plus"></button>
    </a> -->
  </div>
  </div>
</div>



<div class="grid">
    <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Number Of Absences</span>
              <div class="text-900 font-medium text-xl">{{absenceCount }} </div>
            </div>
            <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <a [routerLink]="['/absence/session']" class="dashboard-nav-item">
                <i class="pi pi-calendar text-blue-500 text-xl" style="cursor: pointer;"></i>
              </a>
            </div>
          </div>
          <span class="text-green-500 font-medium"> {{absenceCount }} &nbsp; </span>
          <span class="text-400 font-medium">Is Your Total Absences Number<span class="text-red-500 font-bold">data</span>
          </span>
        </div>
      </div>

      <div class="col-12 lg:col-6 xl:col-3">
        <div class="card ">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Total Absence Days</span>
              <div class="text-900 font-medium text-xl">{{totalAbsenceDays }} </div>
            </div>
            <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <a [routerLink]="['/absence/session']" class="dashboard-nav-item">
                <i class="fa-solid fa-xmark text-black-500 text-xl" style="cursor: pointer;"></i>
              </a>
            </div>
          </div>
          <span class="text-green-500 font-medium"> {{totalAbsenceDays }} &nbsp; </span>
          <span class="text-400 font-medium">Is Your Total Absences Days<span class="text-red-500 font-bold"></span>
          </span>
        </div>
      </div>
      <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Number Of Justified Absences</span>
              <div class="text-900 font-medium text-xl">{{JustifiedAbsencesCount }} </div>
            </div>
            <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <a [routerLink]="['/absence/session']" class="dashboard-nav-item">
                <i class="fa-solid fa-check text-black-500 text-xl" style="cursor: pointer;"></i>
              </a>
            </div>
          </div>
          <span class="text-green-500 font-medium"> {{JustifiedAbsencesCount }} &nbsp; </span>
          <span class="text-400 font-medium">Are Your Justfied Absences<span class="text-red-500 font-bold"></span>
          </span>
        </div>
      </div>
      <div class="col-12 lg:col-6 xl:col-3">
        <div class="card mb-0">
          <div class="flex justify-content-between mb-3">
            <div>
              <span class="block text-500 font-medium mb-3">Number Of Not Justified Absences</span>
              <div class="text-900 font-medium text-xl">{{NonJustifiedAbsencesCount }} </div>
            </div>
            <div class="flex align-items-center justify-content-center bg-orange-100 border-round"
              [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
              <a [routerLink]="['/absence/session']" class="dashboard-nav-item">
                <i class="fa-solid fa-exclamation text-black-500 text-xl" style="cursor: pointer;"></i>
              </a>
            </div>
          </div>
          <span class="text-green-500 font-medium"> {{NonJustifiedAbsencesCount }} &nbsp; </span>
          <span class="text-400 font-medium">Are Your Non Justfied Absences<span class="text-red-500 font-bold"></span>
          </span>
        </div>
      </div>
      <div class="col-12 xl:col-6">
        <div class="card">
          <p-table #dt1 [value]="absences" dataKey="absenceId" [rows]="4" [loading]="loading" [rowHover]="true"
            styleClass="p-datatable-gridlines" [paginator]="true" [globalFilterFields]="['dateDebutAbsence', 'dateFinAbsence','Justifed']"
            responsiveLayout="scroll">
            <ng-template pTemplate="caption">
              <div class="flex justify-content-between flex-column sm:flex-row">
                <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"></button>
                <span class="p-input-icon-left mb-2">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Search Keyword"
                    class="w-full" />
                </span>
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th style="min-width: 12rem">
                  <div class="flex justify-content-between align-items-center">
                    Start Date
                    <p-columnFilter type="date" field="dateDebutAbsence" display="menu" placeholder="mm/dd/yyyy"></p-columnFilter>
                  </div>
                </th>
                <th style="min-width: 12rem">
                  <div class="flex justify-content-between align-items-center">
                    End Date
                    <p-columnFilter type="date" field="dateFinAbsence" display="menu" placeholder="mm/dd/yyyy"></p-columnFilter>
                  </div>
                </th>
                <th style="min-width: 14rem">
                  <div class="flex justify-content-between align-items-center">
                    Justified
                    
                  </div>
                </th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-absence>
              <tr>
                <td>
                  {{ absence.dateDebutAbsence | date: 'MM/dd/yyyy' }}
                </td>
                <td>
                  {{ absence.dateFinAbsence | date: 'MM/dd/yyyy' }}
                </td>
                <td>
                    <span
                          [ngClass]="{'justif-badge': true, 'justif': absence.justified , 'not-justif':!absence.justified}">{{ absence.justified ? 'Yes' : 'No' }}</span>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="3">No absences found.</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="loadingbody">
              <tr>
                <td colspan="3">Loading absences data. Please wait.</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="col-12  xl:col-6">
        <div class="card flex flex-column align-items-center">
            <h5 class="text-left w-full">Radar Chart</h5>
            <p-chart type="radar" [data]="data" [options]="options" [style]="{'width': '40%'}"></p-chart>
        </div>
      </div>  
      <div class="col-12 md:col-12">
        <div class="card">
          <h5>Absence Policy </h5>
          <p-panel header="Header" [toggleable]="true" class="line-height-3 m-0">
            At Createch, we value the well-being and work-life balance of our employees. As part of our commitment to
            fostering a healthy and productive work environment, Createch offers a comprehensive conge policy designed to
            provide ample time for rest, relaxation, and personal pursuits. Employees are entitled to 25 days of paid conge
            annually, which can be utilized for vacation, personal time, or family commitments. Additionally, we observe 10
            public holidays throughout the year, during which the office will remain closed. To ensure smooth operations,
            employees are encouraged to submit their conge requests at least 30 days in advance. Unused conge days can be
            carried forward to the next year, up to a maximum of 10 days. In cases of extended leave for medical reasons,
            employees may apply for additional conge under our sick leave policy. At Createch, we believe that taking time
            off is essential for maintaining a motivated and engaged workforce, and we are committed to supporting our
            employees in achieving a healthy work-life balance.
          </p-panel>
        </div>
      </div>
</div>