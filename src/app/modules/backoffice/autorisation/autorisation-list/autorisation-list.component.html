<div class="table-container">
  <div class="card flex justify-content-center" style="display: flex; justify-content: flex-end;">
      <button pButton [pTooltip]="tooltipContent" tooltipPosition="bottom" label="+" routerLink="/autorisation/add"></button>
      <ng-template #tooltipContent>
          <div class="flex align-items-center">
              <span><b>Add Autorisation</b></span>
          </div>
      </ng-template>
  </div>

  <p-table
      #dt 
      [value]="autorisations"
      dataKey="autorisationId"
      [rows]="10"
      [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[10, 25, 50]"
      [loading]="loading"
      [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [globalFilterFields]="['startDate', 'endDate', 'state', 'contactId']"
      [tableStyle]="{ 'min-width': '75rem' }">

      <ng-template pTemplate="header">
          <tr>
              <th>Autorisation ID</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>State</th>
              <th>Actions</th>
          </tr>
          <tr>
              <th>
                  <p-columnFilter type="text" field="autorisationId"></p-columnFilter>
              </th>
              <th>
                  <p-columnFilter type="text" field="startDate"></p-columnFilter>
              </th>
              <th>
                  <p-columnFilter type="text" field="endDate"></p-columnFilter>
              </th>
              <th>
                  <p-columnFilter type="text" field="state"></p-columnFilter>
              </th>
              <th></th>
          </tr>
      </ng-template>

      <ng-template pTemplate="body" let-autorisation>
          <tr>
              <td>{{ autorisation.autorisationId }}</td>
              <td>{{ autorisation.dateDebut }}</td>
              <td>{{ autorisation.dateFin }}</td>
              <td>{{ autorisation.state }}</td>
              <td>
                  <i class="pi pi-pencil" style="font-size: 1.9rem; color: rgb(98, 0, 255)" (click)="editItem(autorisation)"></i>
                  <i class="pi pi-trash" style="font-size: 1.9rem; color: rgb(255, 72, 0)" (click)="deleteItem(autorisation.autorisationId)"></i>
              </td>
          </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
          <tr>
              <td colspan="5">No autorisations found.</td>
          </tr>
      </ng-template>

  </p-table>
    <!-- Add the EditAutorisationComponent popup dialog -->
    <app-edit-autorisation
    [displayDialog]="displayDialog"
    [autorisation]="selectedAutorisation"
    (onSave)="saveAutorisation()"
    (onHide)="hideDialog()"
  ></app-edit-autorisation>
  <p-confirmDialog header="Delete Confirmation" icon="pi pi-info-circle"
      acceptButtonStyleClass="p-button-danger p-button-text"
      rejectButtonStyleClass="p-button-text p-button-text" acceptIcon="none" rejectIcon="none">
  </p-confirmDialog>
  <p-toast></p-toast>

</div>
